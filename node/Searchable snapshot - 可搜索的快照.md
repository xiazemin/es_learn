https://elasticstack.blog.csdn.net/article/details/116116640

数据层
数据层是具有相同数据角色的节点的集合，这些节点通常共享相同的硬件配置文件：

Content tier：节点处理诸如产品目录之类的内容的索引和查询负载。
Hot tier：节点处理诸如日志或指标之类的时间序列数据的索引负载，并保存您最近，最常访问的数据。
Warm tier：节点保存时间序列数据，这些数据访问频率较低，并且很少需要更新。
Cold tier：节点保存不经常访问且通常不更新的时间序列数据。
Frozen tier：节点保存很少访问且从未更新的时间序列数据，并保存在可搜索快照中。
当你将文档直接索引到特定索引时，它们会无限期地保留在 content tier 节点上。

当你将文档索引到数据流（data stream）时，它们最初位于 Hot tier 节点上。你可以配置索引生命周期管理（ILM）策略，以根据性能，韧性和数据保留要求自动通过热，温和冷层转换时间序列数据。

节点的数据角色是在 elasticsearch.yml 中配置的。例如，可以将群集中性能最高的节点分配给热层和内容层：

node.roles: ["data_hot", "data_content"]

可搜索快照是如何工作的
从快照安装索引后，Elasticsearch 会将其分片分配给集群中的数据节点。然后，数据节点根据指定的安装选项自动将相关的分片数据从存储库检索到本地存储中。如果可能，搜索将使用本地存储中的数据。如果数据在本地不可用，则 Elasticsearch 从快照存储库下载所需的数据。

如果持有这些分片之一的节点发生故障，Elasticsearch 会在另一个节点上自动分配受影响的分片，然后该节点会从存储库中恢复相关的分片数据。不需要副本，也不需要复杂的监视或编排来恢复丢失的碎片。尽管默认情况下可搜索快照索引没有副本，但是你可以通过调整 index.number_of_replicas 将副本添加到这些索引。可搜索快照分片的副本是通过从快照存储库中复制数据来恢复的，就像可搜索快照分片的主数据库一样。相比较来说，正常索引的副本是从主分片拷贝而来。

 从上面的描述中，有如下的两种方式可以实现可搜索快照：

通过 mount snapshot API 来实现
通过 ILM 自动完成。 当可搜索快照操作达到冷或冻结阶段时，它将自动将常规索引转换为可搜索快照索引

