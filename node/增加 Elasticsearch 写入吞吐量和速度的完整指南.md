https://elasticstack.blog.csdn.net/article/details/115158829

Refresh Interval
这可能是在索引策略上发挥最大作用的配置之一。

刷新（refresh）操作使新数据可用于搜索。刷新时，仅存在于内存中的最近索引的数据将传输到新的 Lucene segement。此操作不会将这些段刷新/提交到磁盘，但是由于有 Translog，因此数据是安全的，稍后将对此进行更多说明。

如果索引在最近30秒内收到一个或多个搜索请求，则 Elasticsearch 将每秒执行一次刷新。

如果你正在使用 Elasticsearch，则你的系统可能已经为最终的一致性做好了准备，并且增加刷新间隔可能是你的理想选择。

你可以在批量摄入作业期间为索引设置较大的 refresh_interval，然后在作业完成后将其重新设置为标准值。如果你同时执行许多不同的并发作业，则你可以尝试了解你可以使用多大的 refresh_interval。


Translog
Translog 是 ES 事务日志。每个分片有1个，它随内存缓冲区一起更新，如果发生崩溃，它可用于将数据持久化到 Lucene 的磁盘中。当达到一定大小（默认值为 512 MB）时，它将触发刷新操作，该操作会将所有内存中的 Lucene 段提交到磁盘。此刷新操作采用 Lucene 提交的形式。提交期间，内存中的所有段都合并为一个段并保存到磁盘。


可以想象，这是一个昂贵的操作。你可以增加事务日志以在磁盘上创建更大的段（总体上性能更好），同时还可以减少这种昂贵的操作节奏。


负责该值的字段是 flush_threshold_size


禁用交换（disable swapping）
交换会破坏你的性能。 ES 占用大量内存，因此，如果你不小心，很可能会开始交换内存。\\